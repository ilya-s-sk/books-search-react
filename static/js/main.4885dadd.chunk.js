(this["webpackJsonpbooks-project"]=this["webpackJsonpbooks-project"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},27:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);c(0);var r=c(11),a=c.n(r),o=(c(24),c(25),c(9)),n=c.n(o),s=c(13),l=(c(27),c.p+"static/media/book.030c132c.png"),i=c(8),u=c(1);var b=function(e){var t,c,r=e.book,a=e.route,o=r.title,n=null===(t=r.authors)||void 0===t?void 0:t.join(", "),s=null===(c=r.categories)||void 0===c?void 0:c[0],b=r.imageLinks?r.imageLinks.thumbnail:l;return Object(u.jsxs)(i.b,{to:"/".concat(a),className:"book-item",children:[Object(u.jsx)("div",{className:"book-item__img-block",children:Object(u.jsx)("img",{src:b,alt:o,className:"book-item__img"})}),Object(u.jsx)("p",{className:"book-item__author",children:n}),Object(u.jsx)("p",{className:"book-item__title",children:o}),Object(u.jsx)("p",{className:"book-item__category",children:s})]})},d=(c(34),function(){return Object(u.jsxs)("div",{className:"spinner-block",children:[" ",Object(u.jsx)("div",{className:"lds-dual-ring"})," "]})}),j=(c(35),function(){return Object(u.jsxs)("div",{className:"error",children:[Object(u.jsx)("p",{children:"Something went wrong"}),Object(u.jsx)("p",{children:"Try again later"})]})}),O=function(){return{type:"BOOKS_REQUESTED"}},h=function(){return{type:"BOOKS_ERROR"}},p=c(7);c(36);var _={booksRequested:O,booksError:h,increaseStartIndex:function(){return{type:"INCREASE_START_INDEX"}},moreBooksLoaded:function(e){return{type:"MORE_BOOKS_LOADED",payload:e.items}}},x=Object(p.b)((function(e){return{searchText:e.searchText,orderBy:e.orderBy,category:e.category,startIndex:e.startIndex,books:e.books,totalItems:e.totalItems,loading:e.loading,error:e.error}}),_)((function(e){var t=e.searchText,c=e.orderBy,r=e.category,a=e.startIndex,o=e.books,l=e.totalItems,i=e.loading,O=e.error,h=e.increaseStartIndex,p=e.moreBooksLoaded,_=e.booksRequested,x=e.booksError;function m(){return m=Object(s.a)(n.a.mark((function e(t,c,r,a){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="all"===r?"".concat(t,"&orderBy=").concat(c):"subject:".concat(r,"+").concat(t,"&orderBy=").concat(c),e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(o,"&startIndex=").concat(a,"&maxResults=30&key=AIzaSyAWHSS_z2aDKUVsCSWiXBPgKHtsfFacIH0")).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}return i&&!o.length?Object(u.jsx)(d,{}):O&&!o.length?Object(u.jsx)(j,{}):o.length?Object(u.jsxs)("div",{className:"list-main",children:[o.length?Object(u.jsxs)("p",{className:"books-list__text",children:["Found ",Object(u.jsx)("span",{className:"books-list__text-result",children:l})," results"]}):null,Object(u.jsx)("li",{className:"books-list",children:o.map((function(e){return Object(u.jsx)(b,{book:e.volumeInfo,route:e.id},e.id)}))}),i?Object(u.jsx)(d,{}):O?Object(u.jsx)(j,{}):Object(u.jsx)("button",{className:"load-button",onClick:function(){_(),h(),function(e,t,c,r){return m.apply(this,arguments)}(t,c,r,a).then((function(e){return p(e)})).catch((function(e){return x()}))},children:"Load More"})]}):null})),m=(c(37),c.p+"static/media/bg.c46d1f58.jpg");var y={searchTextEnter:function(e){return{type:"SEARCH_TEXT_ENTER",payload:e}},orderSelected:function(e){return{type:"ORDER_SELECTED",payload:e}},categorySelected:function(e){return{type:"CATEGORY_SELECTED",payload:e}},booksRequested:O,booksLoaded:function(e){return{type:"BOOKS_LOADED",payload:e}},booksError:h},k=Object(p.b)((function(e){return{searchText:e.searchText,orderBy:e.orderBy,category:e.category,loading:e.loading,error:e.error}}),y)((function(e){var t=e.searchText,c=e.orderBy,r=e.category,a=e.searchTextEnter,o=e.orderSelected,l=e.categorySelected,b=e.booksRequested,d=e.booksLoaded,j=e.booksError;function O(){return O=Object(s.a)(n.a.mark((function e(t,c,r){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="all"===r?"".concat(t,"&orderBy=").concat(c):"subject:".concat(r,"+").concat(t,"&orderBy=").concat(c),e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(a,"&maxResults=30&key=AIzaSyAWHSS_z2aDKUVsCSWiXBPgKHtsfFacIH0")).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}return Object(u.jsxs)("div",{className:"search-panel",style:{background:"url(".concat(m,") center center/cover no-repeat")},children:[Object(u.jsx)(i.b,{to:"/",className:"search-panel__title",children:"Search for books"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b(),function(e,t,c){return O.apply(this,arguments)}(t,c,r).then((function(e){return d(e)})).catch((function(e){return j()}))},className:"search-panel__form",children:[Object(u.jsxs)("div",{className:"search-panel__search_block",children:[Object(u.jsx)("input",{type:"text",className:"search-panel__search_block__input",value:t,onChange:function(e){a(e.target.value)}}),Object(u.jsx)("button",{className:"search-panel__search_block__btn",type:"submit",children:"Search"})]}),Object(u.jsxs)("div",{className:"search-panel__selected-block",children:[Object(u.jsxs)("div",{className:"search-panel__selected-block__block",children:[Object(u.jsx)("p",{className:"search-panel__selected-block__text",children:"Categories"}),Object(u.jsxs)("select",{value:r,onChange:function(e){l(e.target.value)},className:"search-panel__selected-block__select",children:[Object(u.jsx)("option",{value:"all",children:"All"}),Object(u.jsx)("option",{value:"art",children:"art"}),Object(u.jsx)("option",{value:"biography",children:"biography"}),Object(u.jsx)("option",{value:"computers",children:"computers"}),Object(u.jsx)("option",{value:"history",children:"history"}),Object(u.jsx)("option",{value:"medical",children:"medical"}),Object(u.jsx)("option",{value:"poetry",children:"poetry"})]})]}),Object(u.jsxs)("div",{className:"search-panel__selected-block__block",children:[Object(u.jsx)("p",{className:"search-panel__selected-block__text",children:"Sorting by"}),Object(u.jsxs)("select",{value:c,onChange:function(e){o(e.target.value)},className:"search-panel__selected-block__select",children:[Object(u.jsx)("option",{value:"relevance",children:"Relevance"}),Object(u.jsx)("option",{value:"newest",children:"Newest"})]})]})]})]})]})})),g=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(k,{}),Object(u.jsx)(x,{})]})},f=c(19),v=c(17),E=c(3),S={searchText:"",orderBy:"relevance",category:"all",startIndex:30,books:[],totalItems:null,loading:!1,error:!1},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_TEXT_ENTER":return Object(E.a)(Object(E.a)({},e),{},{searchText:t.payload});case"ORDER_SELECTED":return Object(E.a)(Object(E.a)({},e),{},{orderBy:t.payload});case"CATEGORY_SELECTED":return Object(E.a)(Object(E.a)({},e),{},{category:t.payload});case"BOOKS_LOADED":return Object(E.a)(Object(E.a)({},e),{},{books:t.payload.items?t.payload.items:[],totalItems:t.payload.totalItems,startIndex:30,loading:!1,error:!1});case"BOOK_LOADED":return Object(E.a)(Object(E.a)({},e),{},{books:[t.payload],loading:!1,error:!1});case"BOOKS_REQUESTED":return Object(E.a)(Object(E.a)({},e),{},{loading:!0});case"BOOKS_ERROR":return Object(E.a)(Object(E.a)({},e),{},{loading:!1,error:!0});case"INCREASE_START_INDEX":return Object(E.a)(Object(E.a)({},e),{},{startIndex:e.startIndex+30});case"MORE_BOOKS_LOADED":return Object(E.a)(Object(E.a)({},e),{},{books:t.payload?[].concat(Object(v.a)(e.books),Object(v.a)(t.payload)):e.books,loading:!1});case"BOOKS_CLEARED":return Object(E.a)({},S);default:return e}},R=Object(f.a)(N);a.a.render(Object(u.jsx)(p.a,{store:R,children:Object(u.jsx)(i.a,{children:Object(u.jsx)(g,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.4885dadd.chunk.js.map