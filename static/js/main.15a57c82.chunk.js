(this["webpackJsonpbooks-project"]=this["webpackJsonpbooks-project"]||[]).push([[0],{31:function(e,t,c){},32:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){"use strict";c.r(t);var o=c(0),r=c.n(o),n=c(15),a=c.n(n),s=(c(31),c(32),c(3)),i=c(9),l=c.n(i),u=c(13),b=c(21),d=c(22),j=c(26),p=c(24),h=c(10),O=function(){return{type:"BOOKS_REQUESTED"}},m=function(){return{type:"BOOKS_ERROR"}},_=(c(37),c.p+"static/media/book.030c132c.png"),x=(c(38),c(1)),k=function(){return Object(x.jsxs)("div",{className:"spinner-block",children:[" ",Object(x.jsx)("div",{className:"lds-dual-ring"})," "]})},g=(c(40),function(){return Object(x.jsxs)("div",{className:"error",children:[Object(x.jsx)("p",{children:"Something went wrong"}),Object(x.jsx)("p",{children:"Try again later"})]})}),f=function(e){Object(j.a)(c,e);var t=Object(p.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return Object(d.a)(c,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.props.books.length||(this.props.booksRequested(),this.getBookById(t).then((function(t){e.props.bookLoaded(t)})).catch((function(t){return e.props.booksError()})))}},{key:"componentWillUnmount",value:function(){1===this.props.books.length&&this.props.clearBooks()}},{key:"getBookById",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes/".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,c,o=this;if(this.props.loading)return Object(x.jsx)(k,{});if(this.props.error)return Object(x.jsx)(g,{});var r=null===(e=this.props.books)||void 0===e?void 0:e.find((function(e){return e.id===o.props.match.params.id})),n=r?r.volumeInfo:0,a=n.title,s=n.description,i=null===(t=n.authors)||void 0===t?void 0:t.join(", "),l=null===(c=n.categories)||void 0===c?void 0:c.join(", "),u=n.imageLinks?n.imageLinks.thumbnail:_;return Object(x.jsxs)("div",{className:"item-page",children:[Object(x.jsx)("button",{onClick:this.props.history.goBack,className:"item-page__back-btn",children:"Go Back"}),Object(x.jsx)("div",{className:"item-page__img-block",children:Object(x.jsx)("img",{src:u,alt:a,className:"item-page__img"})}),Object(x.jsxs)("div",{className:"item-page__text-block",children:[Object(x.jsx)("p",{className:"item-page__category",children:l}),Object(x.jsx)("p",{className:"item-page__title",children:a}),Object(x.jsx)("p",{className:"item-page__author",children:i}),Object(x.jsx)("p",{className:"item-page__description",children:s})]})]})}}]),c}(r.a.Component),y={booksRequested:O,booksError:m,bookLoaded:function(e){return{type:"BOOK_LOADED",payload:e}},clearBooks:function(){return{type:"BOOKS_CLEARED"}}},v=Object(h.b)((function(e){return{loading:e.loading,error:e.error,books:e.books}}),y)(f),E=(c(41),c.p+"static/media/book.030c132c.png"),N=c(11);var S=function(e){var t,c,o=e.book,r=e.route,n=o.title,a=null===(t=o.authors)||void 0===t?void 0:t.join(", "),s=null===(c=o.categories)||void 0===c?void 0:c[0],i=o.imageLinks?o.imageLinks.thumbnail:E;return Object(x.jsxs)(N.b,{to:"/".concat(r),className:"book-item",children:[Object(x.jsx)("div",{className:"book-item__img-block",children:Object(x.jsx)("img",{src:i,alt:n,className:"book-item__img"})}),Object(x.jsx)("p",{className:"book-item__author",children:a}),Object(x.jsx)("p",{className:"book-item__title",children:n}),Object(x.jsx)("p",{className:"book-item__category",children:s})]})};c(44);var B={booksRequested:O,booksError:m,increaseStartIndex:function(){return{type:"INCREASE_START_INDEX"}},moreBooksLoaded:function(e){return{type:"MORE_BOOKS_LOADED",payload:e.items}}},R=Object(h.b)((function(e){return{searchText:e.searchText,orderBy:e.orderBy,category:e.category,startIndex:e.startIndex,books:e.books,totalItems:e.totalItems,loading:e.loading,error:e.error}}),B)((function(e){var t=e.searchText,c=e.orderBy,o=e.category,r=e.startIndex,n=e.books,a=e.totalItems,s=e.loading,i=e.error,b=e.increaseStartIndex,d=e.moreBooksLoaded,j=e.booksRequested,p=e.booksError;function h(){return h=Object(u.a)(l.a.mark((function e(t,c,o,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="all"===o?"".concat(t,"&orderBy=").concat(c):"subject:".concat(o,"+").concat(t,"&orderBy=").concat(c),e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(n,"&startIndex=").concat(r,"&maxResults=30&key=AIzaSyAWHSS_z2aDKUVsCSWiXBPgKHtsfFacIH0")).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}return s&&!n.length?Object(x.jsx)(k,{}):i&&!n.length?Object(x.jsx)(g,{}):n.length?Object(x.jsxs)("div",{className:"list-main",children:[n.length?Object(x.jsxs)("p",{className:"books-list__text",children:["Found ",Object(x.jsx)("span",{className:"books-list__text-result",children:a})," results"]}):null,Object(x.jsx)("li",{className:"books-list",children:n.map((function(e){return Object(x.jsx)(S,{book:e.volumeInfo,route:e.id},e.id)}))}),s?Object(x.jsx)(k,{}):i?Object(x.jsx)(g,{}):Object(x.jsx)("button",{className:"load-button",onClick:function(){j(),b(),function(e,t,c,o){return h.apply(this,arguments)}(t,c,o,r).then((function(e){return d(e)})).catch((function(e){return p()}))},children:"Load More"})]}):null})),I=(c(45),c.p+"static/media/bg.c46d1f58.jpg");var T={searchTextEnter:function(e){return{type:"SEARCH_TEXT_ENTER",payload:e}},orderSelected:function(e){return{type:"ORDER_SELECTED",payload:e}},categorySelected:function(e){return{type:"CATEGORY_SELECTED",payload:e}},booksRequested:O,booksLoaded:function(e){return{type:"BOOKS_LOADED",payload:e}},booksError:m},D=Object(h.b)((function(e){return{searchText:e.searchText,orderBy:e.orderBy,category:e.category,loading:e.loading,error:e.error}}),T)((function(e){var t=e.searchText,c=e.orderBy,o=e.category,r=e.searchTextEnter,n=e.orderSelected,a=e.categorySelected,s=e.booksRequested,i=e.booksLoaded,b=e.booksError;function d(){return d=Object(u.a)(l.a.mark((function e(t,c,o){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="all"===o?"".concat(t,"&orderBy=").concat(c):"subject:".concat(o,"+").concat(t,"&orderBy=").concat(c),e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(r,"&maxResults=30&key=AIzaSyAWHSS_z2aDKUVsCSWiXBPgKHtsfFacIH0")).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return Object(x.jsxs)("div",{className:"search-panel",style:{background:"url(".concat(I,") center center/cover no-repeat")},children:[Object(x.jsx)(N.b,{to:"/",className:"search-panel__title",children:"Search for books"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(),function(e,t,c){return d.apply(this,arguments)}(t,c,o).then((function(e){return i(e)})).catch((function(e){return b()}))},className:"search-panel__form",children:[Object(x.jsxs)("div",{className:"search-panel__search_block",children:[Object(x.jsx)("input",{type:"text",className:"search-panel__search_block__input",value:t,onChange:function(e){r(e.target.value)}}),Object(x.jsx)("button",{className:"search-panel__search_block__btn",type:"submit",children:"Search"})]}),Object(x.jsxs)("div",{className:"search-panel__selected-block",children:[Object(x.jsxs)("div",{className:"search-panel__selected-block__block",children:[Object(x.jsx)("p",{className:"search-panel__selected-block__text",children:"Categories"}),Object(x.jsxs)("select",{value:o,onChange:function(e){a(e.target.value)},className:"search-panel__selected-block__select",children:[Object(x.jsx)("option",{value:"all",children:"All"}),Object(x.jsx)("option",{value:"art",children:"art"}),Object(x.jsx)("option",{value:"biography",children:"biography"}),Object(x.jsx)("option",{value:"computers",children:"computers"}),Object(x.jsx)("option",{value:"history",children:"history"}),Object(x.jsx)("option",{value:"medical",children:"medical"}),Object(x.jsx)("option",{value:"poetry",children:"poetry"})]})]}),Object(x.jsxs)("div",{className:"search-panel__selected-block__block",children:[Object(x.jsx)("p",{className:"search-panel__selected-block__text",children:"Sorting by"}),Object(x.jsxs)("select",{value:c,onChange:function(e){n(e.target.value)},className:"search-panel__selected-block__select",children:[Object(x.jsx)("option",{value:"relevance",children:"Relevance"}),Object(x.jsx)("option",{value:"newest",children:"Newest"})]})]})]})]})]})})),L=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(D,{}),Object(x.jsx)(R,{}),Object(x.jsx)(s.c,{children:Object(x.jsx)(s.a,{path:"/:id",component:v})})]})},w=c(25),A=c(20),C=c(4),K={searchText:"",orderBy:"relevance",category:"all",startIndex:30,books:[],totalItems:null,loading:!1,error:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_TEXT_ENTER":return Object(C.a)(Object(C.a)({},e),{},{searchText:t.payload});case"ORDER_SELECTED":return Object(C.a)(Object(C.a)({},e),{},{orderBy:t.payload});case"CATEGORY_SELECTED":return Object(C.a)(Object(C.a)({},e),{},{category:t.payload});case"BOOKS_LOADED":return Object(C.a)(Object(C.a)({},e),{},{books:t.payload.items?t.payload.items:[],totalItems:t.payload.totalItems,startIndex:30,loading:!1,error:!1});case"BOOK_LOADED":return Object(C.a)(Object(C.a)({},e),{},{books:[t.payload],loading:!1,error:!1});case"BOOKS_REQUESTED":return Object(C.a)(Object(C.a)({},e),{},{loading:!0});case"BOOKS_ERROR":return Object(C.a)(Object(C.a)({},e),{},{loading:!1,error:!0});case"INCREASE_START_INDEX":return Object(C.a)(Object(C.a)({},e),{},{startIndex:e.startIndex+30});case"MORE_BOOKS_LOADED":return Object(C.a)(Object(C.a)({},e),{},{books:t.payload?[].concat(Object(A.a)(e.books),Object(A.a)(t.payload)):e.books,loading:!1});case"BOOKS_CLEARED":return Object(C.a)({},K);default:return e}},H=Object(w.a)(q);a.a.render(Object(x.jsx)(h.a,{store:H,children:Object(x.jsx)(N.a,{children:Object(x.jsx)(L,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.15a57c82.chunk.js.map