(this["webpackJsonpbooks-project"]=this["webpackJsonpbooks-project"]||[]).push([[0],{31:function(e,t,c){},32:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){"use strict";c.r(t);var o=c(0),r=c.n(o),n=c(15),a=c.n(n),s=(c(31),c(17)),i=c(18),l=c(20),u=c(19),b=(c(32),c(9)),d=c.n(b),j=c(13),p=c(10),h=function(){return{type:"BOOKS_REQUESTED"}},O=function(){return{type:"BOOKS_ERROR"}},m=(c(37),c.p+"static/media/book.030c132c.png"),_=(c(38),c(1)),x=function(){return Object(_.jsxs)("div",{className:"spinner-block",children:[" ",Object(_.jsx)("div",{className:"lds-dual-ring"})," "]})},k=(c(40),function(){return Object(_.jsxs)("div",{className:"error",children:[Object(_.jsx)("p",{children:"Something went wrong"}),Object(_.jsx)("p",{children:"Try again later"})]})}),g=function(e){Object(l.a)(c,e);var t=Object(u.a)(c);function c(){return Object(s.a)(this,c),t.apply(this,arguments)}return Object(i.a)(c,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.props.books.length||(this.props.booksRequested(),this.getBookById(t).then((function(t){e.props.bookLoaded(t)})).catch((function(t){return e.props.booksError()})))}},{key:"componentWillUnmount",value:function(){1===this.props.books.length&&this.props.clearBooks()}},{key:"getBookById",value:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes/".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,c,o=this;if(this.props.loading)return Object(_.jsx)(x,{});if(this.props.error)return Object(_.jsx)(k,{});var r=null===(e=this.props.books)||void 0===e?void 0:e.find((function(e){return e.id===o.props.match.params.id})),n=r?r.volumeInfo:0,a=n.title,s=n.description,i=null===(t=n.authors)||void 0===t?void 0:t.join(", "),l=null===(c=n.categories)||void 0===c?void 0:c.join(", "),u=n.imageLinks?n.imageLinks.thumbnail:m;return Object(_.jsxs)("div",{className:"item-page",children:[Object(_.jsx)("button",{onClick:this.props.history.goBack,className:"item-page__back-btn",children:"Go Back"}),Object(_.jsx)("div",{className:"item-page__img-block",children:Object(_.jsx)("img",{src:u,alt:a,className:"item-page__img"})}),Object(_.jsxs)("div",{className:"item-page__text-block",children:[Object(_.jsx)("p",{className:"item-page__category",children:l}),Object(_.jsx)("p",{className:"item-page__title",children:a}),Object(_.jsx)("p",{className:"item-page__author",children:i}),Object(_.jsx)("p",{className:"item-page__description",children:s})]})]})}}]),c}(r.a.Component),f={booksRequested:h,booksError:O,bookLoaded:function(e){return{type:"BOOK_LOADED",payload:e}},clearBooks:function(){return{type:"BOOKS_CLEARED"}}},y=(Object(p.b)((function(e){return{loading:e.loading,error:e.error,books:e.books}}),f)(g),c(41),c.p+"static/media/book.030c132c.png"),v=c(11);var E=function(e){var t,c,o=e.book,r=e.route,n=o.title,a=null===(t=o.authors)||void 0===t?void 0:t.join(", "),s=null===(c=o.categories)||void 0===c?void 0:c[0],i=o.imageLinks?o.imageLinks.thumbnail:y;return Object(_.jsxs)(v.b,{to:"/".concat(r),className:"book-item",children:[Object(_.jsx)("div",{className:"book-item__img-block",children:Object(_.jsx)("img",{src:i,alt:n,className:"book-item__img"})}),Object(_.jsx)("p",{className:"book-item__author",children:a}),Object(_.jsx)("p",{className:"book-item__title",children:n}),Object(_.jsx)("p",{className:"book-item__category",children:s})]})};c(44);var N={booksRequested:h,booksError:O,increaseStartIndex:function(){return{type:"INCREASE_START_INDEX"}},moreBooksLoaded:function(e){return{type:"MORE_BOOKS_LOADED",payload:e.items}}},S=Object(p.b)((function(e){return{searchText:e.searchText,orderBy:e.orderBy,category:e.category,startIndex:e.startIndex,books:e.books,totalItems:e.totalItems,loading:e.loading,error:e.error}}),N)((function(e){var t=e.searchText,c=e.orderBy,o=e.category,r=e.startIndex,n=e.books,a=e.totalItems,s=e.loading,i=e.error,l=e.increaseStartIndex,u=e.moreBooksLoaded,b=e.booksRequested,p=e.booksError;function h(){return h=Object(j.a)(d.a.mark((function e(t,c,o,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="all"===o?"".concat(t,"&orderBy=").concat(c):"subject:".concat(o,"+").concat(t,"&orderBy=").concat(c),e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(n,"&startIndex=").concat(r,"&maxResults=30&key=AIzaSyAWHSS_z2aDKUVsCSWiXBPgKHtsfFacIH0")).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}return s&&!n.length?Object(_.jsx)(x,{}):i&&!n.length?Object(_.jsx)(k,{}):n.length?Object(_.jsxs)("div",{className:"list-main",children:[n.length?Object(_.jsxs)("p",{className:"books-list__text",children:["Found ",Object(_.jsx)("span",{className:"books-list__text-result",children:a})," results"]}):null,Object(_.jsx)("li",{className:"books-list",children:n.map((function(e){return Object(_.jsx)(E,{book:e.volumeInfo,route:e.id},e.id)}))}),s?Object(_.jsx)(x,{}):i?Object(_.jsx)(k,{}):Object(_.jsx)("button",{className:"load-button",onClick:function(){b(),l(),function(e,t,c,o){return h.apply(this,arguments)}(t,c,o,r).then((function(e){return u(e)})).catch((function(e){return p()}))},children:"Load More"})]}):null})),B=(c(45),c.p+"static/media/bg.c46d1f58.jpg");var R={searchTextEnter:function(e){return{type:"SEARCH_TEXT_ENTER",payload:e}},orderSelected:function(e){return{type:"ORDER_SELECTED",payload:e}},categorySelected:function(e){return{type:"CATEGORY_SELECTED",payload:e}},booksRequested:h,booksLoaded:function(e){return{type:"BOOKS_LOADED",payload:e}},booksError:O},I=Object(p.b)((function(e){return{searchText:e.searchText,orderBy:e.orderBy,category:e.category,loading:e.loading,error:e.error}}),R)((function(e){var t=e.searchText,c=e.orderBy,o=e.category,r=e.searchTextEnter,n=e.orderSelected,a=e.categorySelected,s=e.booksRequested,i=e.booksLoaded,l=e.booksError;function u(){return u=Object(j.a)(d.a.mark((function e(t,c,o){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="all"===o?"".concat(t,"&orderBy=").concat(c):"subject:".concat(o,"+").concat(t,"&orderBy=").concat(c),e.next=3,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(r,"&maxResults=30&key=AIzaSyAWHSS_z2aDKUVsCSWiXBPgKHtsfFacIH0")).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}return Object(_.jsxs)("div",{className:"search-panel",style:{background:"url(".concat(B,") center center/cover no-repeat")},children:[Object(_.jsx)(v.b,{to:"/home",className:"search-panel__title",children:"Search for books"}),Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(),function(e,t,c){return u.apply(this,arguments)}(t,c,o).then((function(e){return i(e)})).catch((function(e){return l()}))},className:"search-panel__form",children:[Object(_.jsxs)("div",{className:"search-panel__search_block",children:[Object(_.jsx)("input",{type:"text",className:"search-panel__search_block__input",value:t,onChange:function(e){r(e.target.value)}}),Object(_.jsx)("button",{className:"search-panel__search_block__btn",type:"submit",children:"Search"})]}),Object(_.jsxs)("div",{className:"search-panel__selected-block",children:[Object(_.jsxs)("div",{className:"search-panel__selected-block__block",children:[Object(_.jsx)("p",{className:"search-panel__selected-block__text",children:"Categories"}),Object(_.jsxs)("select",{value:o,onChange:function(e){a(e.target.value)},className:"search-panel__selected-block__select",children:[Object(_.jsx)("option",{value:"all",children:"All"}),Object(_.jsx)("option",{value:"art",children:"art"}),Object(_.jsx)("option",{value:"biography",children:"biography"}),Object(_.jsx)("option",{value:"computers",children:"computers"}),Object(_.jsx)("option",{value:"history",children:"history"}),Object(_.jsx)("option",{value:"medical",children:"medical"}),Object(_.jsx)("option",{value:"poetry",children:"poetry"})]})]}),Object(_.jsxs)("div",{className:"search-panel__selected-block__block",children:[Object(_.jsx)("p",{className:"search-panel__selected-block__text",children:"Sorting by"}),Object(_.jsxs)("select",{value:c,onChange:function(e){n(e.target.value)},className:"search-panel__selected-block__select",children:[Object(_.jsx)("option",{value:"relevance",children:"Relevance"}),Object(_.jsx)("option",{value:"newest",children:"Newest"})]})]})]})]})]})})),T=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(I,{}),Object(_.jsx)(S,{})]})},D=c(3),L=function(e){Object(l.a)(c,e);var t=Object(u.a)(c);function c(){return Object(s.a)(this,c),t.apply(this,arguments)}return Object(i.a)(c,[{key:"render",value:function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(D.c,{children:Object(_.jsx)(D.a,{path:"/home",exact:!0,component:T})})})}}]),c}(o.Component),w=L,A=c(26),C=c(24),K=c(4),q={searchText:"",orderBy:"relevance",category:"all",startIndex:30,books:[],totalItems:null,loading:!1,error:!1},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_TEXT_ENTER":return Object(K.a)(Object(K.a)({},e),{},{searchText:t.payload});case"ORDER_SELECTED":return Object(K.a)(Object(K.a)({},e),{},{orderBy:t.payload});case"CATEGORY_SELECTED":return Object(K.a)(Object(K.a)({},e),{},{category:t.payload});case"BOOKS_LOADED":return Object(K.a)(Object(K.a)({},e),{},{books:t.payload.items?t.payload.items:[],totalItems:t.payload.totalItems,startIndex:30,loading:!1,error:!1});case"BOOK_LOADED":return Object(K.a)(Object(K.a)({},e),{},{books:[t.payload],loading:!1,error:!1});case"BOOKS_REQUESTED":return Object(K.a)(Object(K.a)({},e),{},{loading:!0});case"BOOKS_ERROR":return Object(K.a)(Object(K.a)({},e),{},{loading:!1,error:!0});case"INCREASE_START_INDEX":return Object(K.a)(Object(K.a)({},e),{},{startIndex:e.startIndex+30});case"MORE_BOOKS_LOADED":return Object(K.a)(Object(K.a)({},e),{},{books:t.payload?[].concat(Object(C.a)(e.books),Object(C.a)(t.payload)):e.books,loading:!1});case"BOOKS_CLEARED":return Object(K.a)({},q);default:return e}},X=Object(A.a)(H);a.a.render(Object(_.jsx)(p.a,{store:X,children:Object(_.jsx)(v.a,{children:Object(_.jsx)(w,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.68fe3f65.chunk.js.map